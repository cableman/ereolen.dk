<?php

/**
 * @file
 * Code for the BReol frontend feature.
 */

include_once 'breol_frontend.features.inc';

/**
 * Implements hook_ctools_plugin_directory().
 *
 * It simply tells panels where to find the .inc files that define various
 * args, contexts, content_types. In this case the subdirectories of
 * ctools_plugin_example/panels are used.
 */
function breol_frontend_ctools_plugin_directory($owner, $plugin_type) {
  return 'plugins/' . $plugin_type;
}

/**
 * Implements hook_theme().
 */
function breol_frontend_theme($existing, $type, $theme, $path) {
  return array(
    'cover_image' => array(
      'variables' => array(
        'image_uri' => NULL,
        'cover_background_color' => 'transparant',
        'title' => '',
        'subtitle' => '',
        'node'  => NULL,
      ),
      'path' => drupal_get_path('module', 'breol_frontend') . '/templates',
      'template' => 'cover-image',
    ),
  );
}

/**
 * Implements hook_entity_info_alter().
 */
function breol_frontend_entity_info_alter(&$entity_info) {
  $entity_info['node']['view modes']['teaser_small'] = array(
    'label' => t('Teaser Small'),
    'custom settings' => TRUE,
  );

  $entity_info['node']['view modes']['teaser_medium'] = array(
    'label' => t('Teaser Medium'),
    'custom settings' => TRUE,
  );

  $entity_info['file']['view modes']['teaser_small'] = array(
    'label' => t('Teaser Small'),
    'custom settings' => TRUE,
  );

  $entity_info['file']['view modes']['teaser_medium'] = array(
    'label' => t('Teaser Medium'),
    'custom settings' => TRUE,
  );
}

/**
 * Implements hook_image_styles_alter().
 */
function breol_frontend_image_styles_alter(&$styles) {
  $styles['ding_list_medium']['effects'] = array(
    array(
      'label' => 'Skalér og beskær',
      'help' => 'Skalering og beskæring bevarer billedets højde-bredde-forhold og beskærer derefter den største dimension. Det er nyttigt til at generere kvadratiske thumbnails uden at forvrænge billedet.',
      'effect callback' => 'image_scale_and_crop_effect',
      'dimensions callback' => 'image_resize_dimensions',
      'form callback' => 'image_resize_form',
      'summary theme' => 'image_resize_summary',
      'module' => 'image',
      'name' => 'image_scale_and_crop',
      'data' => array(
        'width' => 280,
        'height' => 419,
      ),
      'weight' => 1,
    ),
  );
}
